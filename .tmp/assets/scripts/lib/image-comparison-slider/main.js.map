{"version":3,"sources":["lib/image-comparison-slider/main.js"],"names":["jQuery","document","ready","$","dragging","scrolling","resizing","imageComparisonContainers","checkPosition","window","on","requestAnimationFrame","setTimeout","each","actual","drags","find","checkLabel","container","actualContainer","scrollTop","height","offset","top","addClass","updateLabel","dragElement","resizeElement","labelContainer","labelResizeElement","e","dragWidth","outerWidth","xPosition","left","pageX","containerOffset","containerWidth","minLeft","maxLeft","parents","animateDraggedHandle","removeClass","preventDefault","leftValue","widthValue","css","label","position"],"mappings":"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","file":"main.js","sourcesContent":["jQuery(document).ready(function($){\n    var dragging = false,\n        scrolling = false,\n        resizing = false;\n    //cache jQuery objects\n    var imageComparisonContainers = $('.cd-image-container');\n    //check if the .cd-image-container is in the viewport \n    //if yes, animate it\n    checkPosition(imageComparisonContainers);\n    $(window).on('scroll', function(){\n        if( !scrolling) {\n            scrolling =  true;\n            ( !window.requestAnimationFrame )\n                ? setTimeout(function(){checkPosition(imageComparisonContainers);}, 100)\n                : requestAnimationFrame(function(){checkPosition(imageComparisonContainers);});\n        }\n    });\n    \n    //make the .cd-handle element draggable and modify .cd-resize-img width according to its position\n    imageComparisonContainers.each(function(){\n        var actual = $(this);\n        drags(actual.find('.cd-handle'), actual.find('.cd-resize-img'), actual, actual.find('.cd-image-label[data-type=\"original\"]'), actual.find('.cd-image-label[data-type=\"modified\"]'));\n    });\n\n    //upadate images label visibility\n    $(window).on('resize', function(){\n        if( !resizing) {\n            resizing =  true;\n            ( !window.requestAnimationFrame )\n                ? setTimeout(function(){checkLabel(imageComparisonContainers);}, 100)\n                : requestAnimationFrame(function(){checkLabel(imageComparisonContainers);});\n        }\n    });\n\n    function checkPosition(container) {\n        container.each(function(){\n            var actualContainer = $(this);\n            if( $(window).scrollTop() + $(window).height()*0.5 > actualContainer.offset().top) {\n                actualContainer.addClass('is-visible');\n            }\n        });\n\n        scrolling = false;\n    }\n\n    function checkLabel(container) {\n        container.each(function(){\n            var actual = $(this);\n            updateLabel(actual.find('.cd-image-label[data-type=\"modified\"]'), actual.find('.cd-resize-img'), 'left');\n            updateLabel(actual.find('.cd-image-label[data-type=\"original\"]'), actual.find('.cd-resize-img'), 'right');\n        });\n\n        resizing = false;\n    }\n\n    //draggable funtionality - credits to http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/\n    function drags(dragElement, resizeElement, container, labelContainer, labelResizeElement) {\n        dragElement.on('mousedown vmousedown', function(e) {\n            dragElement.addClass('draggable');\n            resizeElement.addClass('resizable');\n\n            var dragWidth = dragElement.outerWidth(),\n                xPosition = dragElement.offset().left + dragWidth - e.pageX,\n                containerOffset = container.offset().left,\n                containerWidth = container.outerWidth(),\n                minLeft = containerOffset + 10,\n                maxLeft = containerOffset + containerWidth - dragWidth - 10;\n            \n            dragElement.parents().on('mousemove vmousemove', function(e) {\n                if( !dragging) {\n                    dragging =  true;\n                    ( !window.requestAnimationFrame )\n                        ? setTimeout(function(){animateDraggedHandle(e, xPosition, dragWidth, minLeft, maxLeft, containerOffset, containerWidth, resizeElement, labelContainer, labelResizeElement);}, 100)\n                        : requestAnimationFrame(function(){animateDraggedHandle(e, xPosition, dragWidth, minLeft, maxLeft, containerOffset, containerWidth, resizeElement, labelContainer, labelResizeElement);});\n                }\n            }).on('mouseup vmouseup', function(e){\n                dragElement.removeClass('draggable');\n                resizeElement.removeClass('resizable');\n            });\n            e.preventDefault();\n        }).on('mouseup vmouseup', function(e) {\n            dragElement.removeClass('draggable');\n            resizeElement.removeClass('resizable');\n        });\n    }\n\n    function animateDraggedHandle(e, xPosition, dragWidth, minLeft, maxLeft, containerOffset, containerWidth, resizeElement, labelContainer, labelResizeElement) {\n        var leftValue = e.pageX + xPosition - dragWidth;   \n        //constrain the draggable element to move inside his container\n        if(leftValue < minLeft ) {\n            leftValue = minLeft;\n        } else if ( leftValue > maxLeft) {\n            leftValue = maxLeft;\n        }\n\n        var widthValue = (leftValue + dragWidth/2 - containerOffset)*100/containerWidth+'%';\n        \n        $('.draggable').css('left', widthValue).on('mouseup vmouseup', function() {\n            $(this).removeClass('draggable');\n            resizeElement.removeClass('resizable');\n        });\n\n        $('.resizable').css('width', widthValue); \n\n        updateLabel(labelResizeElement, resizeElement, 'left');\n        updateLabel(labelContainer, resizeElement, 'right');\n        dragging =  false;\n    }\n\n    function updateLabel(label, resizeElement, position) {\n        if(position == 'left') {\n            ( label.offset().left + label.outerWidth() < resizeElement.offset().left + resizeElement.outerWidth() ) ? label.removeClass('is-hidden') : label.addClass('is-hidden') ;\n        } else {\n            ( label.offset().left > resizeElement.offset().left + resizeElement.outerWidth() ) ? label.removeClass('is-hidden') : label.addClass('is-hidden') ;\n        }\n    }\n});"]}